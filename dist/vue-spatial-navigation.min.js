var VueSpatialNavigation=function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,o=!1,s=void 0;try{for(var d,r=e[Symbol.iterator]();!(i=(d=r.next()).done)&&(n.push(d.value),!t||n.length!==t);i=!0);}catch(e){o=!0,s=e}finally{try{i||null==r.return||r.return()}finally{if(o)throw s}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var d=new(n(t).default),r=!1,a=[],u={37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN"},l=function(e){if(r){var t=a.findIndex((function(t){return t.id===e.id}));t>-1?a[t]=e:a.push(e)}else r=!0,a.push(e),window.addEventListener("keydown",(function(e){a.forEach((function(t){if(!t.preCondition||t.preCondition())return t[u[e.keyCode]]&&t[u[e.keyCode]]()}))}))},c=function(e){var t=a.findIndex((function(t){return t.id===e}));t>-1&&a.splice(t,1)},h={name:"FocusableGrid",props:{onSettled:{type:Function,required:!1},child:{type:Object,required:!0},items:{type:Array,required:!0},isFocused:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},shouldScroll:{type:Boolean,default:!1},maxColumn:{type:Number,default:6},id:{default:Math.random().toString()}},data:function(){return{focusedIndex:0,scrollAmount:0,activeRow:0,activeColumn:0}},computed:{columns:function(){return{width:"".concat(100/this.maxColumn,"%")}},style:function(){return{top:"".concat(this.scrollAmount,"px")}}},methods:{getScrollAmount:function(e,t){if(e){var n=e.clientHeight;return t?-n:n}return 0},isPrevColumnPresent:function(){return this.focusedIndex>0&&this.activeColumn>0},isNextColumnPresent:function(){return this.focusedIndex<this.items.length-1&&this.activeColumn<this.maxColumn-1},isPrevRowPresent:function(){return this.focusedIndex>0&&this.activeRow>0},isNextRowPresent:function(){return this.focusedIndex<this.items.length-1&&this.activeRow<this.items.length/this.maxColumn-1},updateColumn:function(e){var t=e?-1:1;this.focusedIndex+=t,this.activeColumn+=t},updateRow:function(e){var t=e?-this.maxColumn:this.maxColumn,n=e?-1:1;this.focusedIndex+=t,this.activeRow+=n,this.isFocusIndexOutOfBound()&&(this.focusedIndex=this.items.length-1,this.activeColumn=(this.items.length-1)%this.maxColumn)},isFocusIndexOutOfBound:function(){return this.focusedIndex>this.items.length-1},updateScrollValue:function(e){this.scrollAmount+=this.getScrollAmount(this.$refs.childItem[this.focusedIndex],e)},handleFocusLost:function(){this.focusedIndex>this.items.length-1&&(this.focusedIndex=this.items.length-1)},resetFocus:function(e){!e.force&&this.isFocused||(this.focusedIndex=0,this.activeColumn=0,this.activeRow=0,this.scrollAmount=0)},elementInViewport:function(e){var t=this.$el.getBoundingClientRect(),n=e.getBoundingClientRect();return n.top+n.height>=t.top&&n.bottom-n.height<=t.bottom},onSettledFunction:function(e){this.onSettled&&this.onSettled(e)}},updated:function(){var e=this;this.handleFocusLost(),setTimeout((function(){e.$refs.childItem.forEach((function(t){e.elementInViewport(t)?t.classList.remove("hide"):t.classList.add("hide")}))}),200)},mounted:function(){var e=this;l({LEFT:function(){e.isPrevColumnPresent()?e.updateColumn("reverse"):e.onSettledFunction("LEFT")},RIGHT:function(){e.isNextColumnPresent()?e.updateColumn():e.onSettledFunction("RIGHT")},UP:function(){e.isPrevRowPresent()?(e.updateRow("reverse"),e.shouldScroll&&e.updateScrollValue()):e.onSettledFunction("UP")},DOWN:function(){e.isNextRowPresent()?(e.updateRow(),e.shouldScroll&&e.updateScrollValue("negative")):e.onSettledFunction("DOWN")},preCondition:function(){return e.isFocused&&!e.disabled},id:"grid-".concat(this.id)}),d.on("RESET_FOCUS",this.resetFocus)},destroyed:function(){c("grid-".concat(this.id)),d.off("RESET_FOCUS",this.resetFocus)}};function f(e,t,n,i,o,s,d,r,a,u){"boolean"!=typeof d&&(a=r,r=d,d=!1);const l="function"==typeof n?n.options:n;let c;if(e&&e.render&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,o&&(l.functional=!0)),i&&(l._scopeId=i),s?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):t&&(c=d?function(e){t.call(this,u(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,r(e))}),c)if(l.functional){const e=l.render;l.render=function(t,n){return c.call(n),e(t,n)}}else{const e=l.beforeCreate;l.beforeCreate=e?[].concat(e,c):[c]}return n}const m="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function p(e){return(e,t)=>function(e,t){const n=m?t.media||"default":e,i=v[n]||(v[n]={ids:new Set,styles:[]});if(!i.ids.has(e)){i.ids.add(e);let n=t.source;if(t.map&&(n+="\n/*# sourceURL="+t.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",t.media&&i.element.setAttribute("media",t.media),void 0===x&&(x=document.head||document.getElementsByTagName("head")[0]),x.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(n),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{const e=i.ids.size-1,t=document.createTextNode(n),o=i.element.childNodes;o[e]&&i.element.removeChild(o[e]),o.length?i.element.insertBefore(t,o[e]):i.element.appendChild(t)}}}(e,t)}let x;const v={};var I=f({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"focusableGrid"},[n("div",{ref:"grid",staticClass:"grid",class:{focus:e.isFocused},style:e.style},e._l(e.items,(function(t,i){return n("div",{key:i,ref:"childItem",refInFor:!0,staticClass:"child",style:e.columns},[n(e.child,e._b({tag:"component",attrs:{id:"child"+(t.id||i),isFocused:e.isFocused&&i===e.focusedIndex}},"component",t,!1))],1)})),0)])},staticRenderFns:[]},(function(e){e&&e("data-v-8fa230a4_0",{source:".focusableGrid[data-v-8fa230a4]{width:100%;height:100%}.grid[data-v-8fa230a4]{display:flex;flex-wrap:wrap;position:relative;transition:top .15s ease}.child[data-v-8fa230a4]{display:flex;transition:opacity .15s ease}.hide[data-v-8fa230a4]{opacity:0}.vertical[data-v-8fa230a4]{flex-direction:column}",map:void 0,media:void 0})}),h,"data-v-8fa230a4",!1,void 0,!1,p,void 0,void 0),g=f({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"focusableList"},[e.title?n("h3",[e._v(e._s(e.title))]):e._e(),e._v(" "),n("div",{ref:"list",staticClass:"list",class:{focus:e.isFocused,vertical:"VERTICAL"===e.orientation},style:e.style},e._l(e.items,(function(t,i){return n("div",{key:i,ref:"childItem",refInFor:!0,staticClass:"child"},[n(e.child,e._b({tag:"component",class:{disabled:e.disabledIndex.includes(i)},attrs:{id:"child"+(t.id||i),isFocused:e.isFocused&&i===e.focusedIndex,disabled:t.disabled||e.disabledIndex.includes(i)}},"component",t,!1))],1)})),0)])},staticRenderFns:[]},(function(e){e&&e("data-v-bf74ef1a_0",{source:".focusableList[data-v-bf74ef1a]{height:100%;width:100%}h3[data-v-bf74ef1a]{color:#fff;text-align:left;margin:32px 0 16px;font-size:1.6vmax}.list[data-v-bf74ef1a]{display:flex;transition:all .15s ease;position:relative}.child[data-v-bf74ef1a]{display:flex;transition:opacity .15s ease}.hide[data-v-bf74ef1a]{opacity:0}.vertical[data-v-bf74ef1a]{flex-direction:column}.disabled[data-v-bf74ef1a]{background:grey}",map:void 0,media:void 0})}),{name:"focusableList",props:{nested:{type:Boolean,default:!1},onSettled:{type:Function,required:!1},onChildChange:{type:Function,required:!1},child:{type:Object,required:!0},title:{type:String,require:!1},items:{type:Array,required:!0},isFocused:{type:Boolean,default:!1},defaultIndex:{type:Number,default:-1},disabled:{type:Boolean,default:!1},disabledIndex:{type:Array,default:function(){return[-1]}},orientation:{type:String,default:"HORIZONTAL"},shouldScroll:{type:Boolean,default:!1},id:{default:Math.random().toString()}},data:function(){return{focusedIndex:-1,scrollAmount:0,ready:!1}},computed:{style:function(){return("VERTICAL"===this.orientation?"top":"left")+": ".concat(this.scrollAmount,"px")}},methods:{isEnabledIndex:function(e){return!this.disabledIndex.includes(e)},setInitialvalue:function(){this.defaultIndex>-1&&this.defaultIndex<this.items.length&&this.isEnabledIndex(this.defaultIndex)?this.focusedIndex=this.defaultIndex:this.focusedIndex=this.getValidNextIndex(),this.focusedIndex>=-1&&this.updateScrollValue()},getKeysByOrientation:function(e){return{REVERSE:"VERTICAL"===e?"UP":"LEFT",FORWARD:"VERTICAL"===e?"DOWN":"RIGHT"}},getScrollAmountByOrientation:function(e,t){return e?-e["VERTICAL"===t?"clientHeight":"clientWidth"]:0},handleFocusLost:function(){(this.focusedIndex>this.items.length-1||this.disabledIndex.includes(this.focusedIndex))&&(this.getValidPrevIndex()!==this.focusedIndex?(this.$emit("onFocusLost",{prevIndex:this.focusedIndex,newIndex:this.getValidPrevIndex()}),this.focusedIndex=this.getValidPrevIndex()):this.getValidNextIndex()!==this.focusedIndex?(this.$emit("onFocusLost",{prevIndex:this.focusedIndex,newIndex:this.getValidNextIndex()}),this.focusedIndex=this.getValidNextIndex()):(this.focusedIndex=-1,this.$emit("onFocusLost",{err:"No items to set focus, either disable it or provide new item to setFocus"})))},isPrevItemPresent:function(){return this.focusedIndex>0},isNextItemPresent:function(){return this.focusedIndex<this.items.length-1},getValidNextIndex:function(){for(var e=this.focusedIndex+1,t=this.focusedIndex;e<this.items.length;){if(this.isEnabledIndex(e)){t=e,this.$emit("onFocusChange",{prevIndex:this.focusedIndex,newIndex:t,item:this.items[t]}),this.onChildChangeFunction(this.focusedIndex,t,this.items[t]);break}e++}return t},getValidPrevIndex:function(){for(var e=this.focusedIndex-1,t=this.focusedIndex;e>=0;){if(this.isEnabledIndex(e)&&e<this.items.length){t=e,this.$emit("onFocusChange",{prevIndex:this.focusedIndex,newIndex:t,item:this.items[t]}),this.onChildChangeFunction(this.focusedIndex,t,this.items[t]);break}e--}return t},updateFocus:function(e){this.focusedIndex=e?this.getValidPrevIndex():this.getValidNextIndex()},onChildChangeFunction:function(e,t,n){this.ready&&this.onChildChange&&this.onChildChange({prevIndex:e,newIndex:t,item:n})},updateScrollValue:function(){this.shouldScroll&&this.$refs.childItem&&(this.scrollAmount=this.getScrollAmountByOrientation(this.$refs.childItem[0],this.orientation)*this.focusedIndex)},resetFocus:function(e){!e.force&&this.isFocused||(this.focusedIndex=0,this.scrollAmount=0)},setExternalFocus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index,n=e.id;n===this.id&&(this.isEnabledIndex(t)&&t>=0&&t<this.items.length-1?(this.focusedIndex=t,this.updateScrollValue()):console.error("focus to the given index ".concat(t," is not possible")))},elementInViewport:function(e){var t=this.$el.getBoundingClientRect(),n=e.getBoundingClientRect(),i=n.left+n.width>=t.left&&n.right-n.width/2<=t.right,o=n.top+n.height>=t.top&&n.bottom-n.height<=t.bottom;return i&&o},onSettledFunction:function(e){this.ready&&this.onSettled&&this.onSettled(e)}},updated:function(){var e=this;this.handleFocusLost(),setTimeout((function(){e.$refs.childItem.forEach((function(t){e.elementInViewport(t)?t.classList.remove("hide"):t.classList.add("hide")}))}),250)},mounted:function(){var e,t=this;this.setInitialvalue();var n=this.getKeysByOrientation(this.orientation),o=this.getKeysByOrientation(!this.orientation);l((i(e={id:"list-".concat(this.id)},o.REVERSE,(function(){"VERTICAL"!=t.orientation||t.nested||t.onSettledFunction(o.REVERSE)})),i(e,o.FORWARD,(function(){"VERTICAL"!=t.orientation||t.nested||t.onSettledFunction(o.FORWARD)})),i(e,n.REVERSE,(function(){t.isPrevItemPresent()?(t.updateFocus("reverse"),t.updateScrollValue()):t.onSettledFunction(n.REVERSE)})),i(e,n.FORWARD,(function(){t.isNextItemPresent()?(t.updateFocus(),t.updateScrollValue()):t.onSettledFunction(n.FORWARD)})),i(e,"preCondition",(function(){return t.isFocused&&!t.disabled})),e)),d.on("RESET_FOCUS",this.resetFocus),d.on("SET_FOCUS",this.setExternalFocus),this.ready=!0},destroyed:function(){c("list-".concat(this.id)),d.off("RESET_FOCUS",this.resetFocus),d.off("SET_FOCUS",this.setExternalFocus)}},"data-v-bf74ef1a",!1,void 0,!1,p,void 0,void 0),y=Object.freeze({__proto__:null,FocusableList:g,FocusableGrid:I}),b=function(e){b.installed||(b.installed=!0,Object.entries(y).forEach((function(t){var n=o(t,2),i=n[0],s=n[1];console.error("componentName",i),e.component(i,s)})))},F={install:b},C=null;return"undefined"!=typeof window?C=window.Vue:"undefined"!=typeof global&&(C=global.Vue),C&&C.use(F),e.FocusableGrid=I,e.FocusableList=g,e.default=F,e}({},mitt);