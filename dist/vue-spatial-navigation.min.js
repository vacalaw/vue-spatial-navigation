var VueSpatialNavigation=function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,s=!1,o=void 0;try{for(var d,u=e[Symbol.iterator]();!(i=(d=u.next()).done)&&(n.push(d.value),!t||n.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var d=new(n(t).default),u=!1,r=[],a={37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN"},l=function(e){if(u){var t=r.findIndex((function(t){return t.id===e.id}));t>-1?r[t]=e:r.push(e)}else u=!0,r.push(e),window.addEventListener("keydown",(function(e){r.forEach((function(t){if(!t.preCondition||t.preCondition())return t[a[e.keyCode]]&&t[a[e.keyCode]]()}))}))},c=function(e){var t=r.findIndex((function(t){return t.id===e}));t>-1&&r.splice(t,1)},h={name:"FocusableGrid",props:{onSettled:{type:Function,required:!1},child:{type:Object,required:!0},items:{type:Array,required:!0},isFocused:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},shouldScroll:{type:Boolean,default:!1},maxColumn:{type:Number,default:6},id:{default:Math.random().toString()}},data:function(){return{focusedIndex:0,scrollAmount:0,activeRow:0,activeColumn:0}},computed:{columns:function(){return{width:"".concat(100/this.maxColumn,"%")}},style:function(){return{top:"".concat(this.scrollAmount,"px")}}},methods:{showItem:function(e){return e>=this.activeRow*this.maxColumn&&e<=this.focusedIndex+this.maxColumn*this.maxColumn-this.activeColumn+this.maxColumn-1},getScrollAmount:function(e,t){if(e){var n=e.clientHeight;return t?-n:n}return 0},isPrevColumnPresent:function(){return this.focusedIndex>0&&this.activeColumn>0},isNextColumnPresent:function(){return this.focusedIndex<this.items.length-1&&this.activeColumn<this.maxColumn-1},isPrevRowPresent:function(){return this.focusedIndex>0&&this.activeRow>0},isNextRowPresent:function(){return this.focusedIndex<this.items.length-1&&this.activeRow<this.items.length/this.maxColumn-1},updateColumn:function(e){var t=e?-1:1;this.focusedIndex+=t,this.activeColumn+=t},updateRow:function(e){var t=e?-this.maxColumn:this.maxColumn,n=e?-1:1;this.focusedIndex+=t,this.activeRow+=n,this.isFocusIndexOutOfBound()&&(this.focusedIndex=this.items.length-1,this.activeColumn=(this.items.length-1)%this.maxColumn)},isFocusIndexOutOfBound:function(){return this.focusedIndex>this.items.length-1},updateScrollValue:function(e){this.scrollAmount+=this.getScrollAmount(this.$refs.childItem[this.focusedIndex],e)},handleFocusLost:function(){this.focusedIndex>this.items.length-1&&(this.focusedIndex=this.items.length-1)},resetFocus:function(e){!e.force&&this.isFocused||(this.focusedIndex=0,this.activeColumn=0,this.activeRow=0,this.scrollAmount=0)},onSettledFunction:function(e){this.onSettled&&this.onSettled(e)}},updated:function(){this.handleFocusLost()},mounted:function(){var e=this;l({LEFT:function(){e.isPrevColumnPresent()?e.updateColumn("reverse"):e.onSettledFunction("LEFT")},RIGHT:function(){e.isNextColumnPresent()?e.updateColumn():e.onSettledFunction("RIGHT")},UP:function(){e.isPrevRowPresent()?(e.updateRow("reverse"),e.shouldScroll&&e.updateScrollValue()):e.onSettledFunction("UP")},DOWN:function(){e.isNextRowPresent()?(e.updateRow(),e.shouldScroll&&e.updateScrollValue("negative")):e.onSettledFunction("DOWN")},preCondition:function(){return e.isFocused&&!e.disabled},id:"grid-".concat(this.id)}),d.on("RESET_FOCUS",this.resetFocus)},destroyed:function(){c("grid-".concat(this.id)),d.off("RESET_FOCUS",this.resetFocus)}};function f(e,t,n,i,s,o,d,u,r,a){"boolean"!=typeof d&&(r=u,u=d,d=!1);const l="function"==typeof n?n.options:n;let c;if(e&&e.render&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0,s&&(l.functional=!0)),i&&(l._scopeId=i),o?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,r(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},l._ssrRegister=c):t&&(c=d?function(e){t.call(this,a(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,u(e))}),c)if(l.functional){const e=l.render;l.render=function(t,n){return c.call(n),e(t,n)}}else{const e=l.beforeCreate;l.beforeCreate=e?[].concat(e,c):[c]}return n}const m="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function p(e){return(e,t)=>function(e,t){const n=m?t.media||"default":e,i=I[n]||(I[n]={ids:new Set,styles:[]});if(!i.ids.has(e)){i.ids.add(e);let n=t.source;if(t.map&&(n+="\n/*# sourceURL="+t.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",t.media&&i.element.setAttribute("media",t.media),void 0===x&&(x=document.head||document.getElementsByTagName("head")[0]),x.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(n),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{const e=i.ids.size-1,t=document.createTextNode(n),s=i.element.childNodes;s[e]&&i.element.removeChild(s[e]),s.length?i.element.insertBefore(t,s[e]):i.element.appendChild(t)}}}(e,t)}let x;const I={};var v=f({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"focusableGrid"},[n("div",{ref:"grid",staticClass:"grid",class:{focus:e.isFocused},style:e.style},e._l(e.items,(function(t,i){return n("div",{key:i,ref:"childItem",refInFor:!0,staticClass:"child",class:{show:e.showItem(i)},style:e.columns},[n(e.child,e._b({tag:"component",attrs:{id:"child"+(t.id||i),isFocused:e.isFocused&&i===e.focusedIndex}},"component",t,!1))],1)})),0)])},staticRenderFns:[]},(function(e){e&&e("data-v-106e7718_0",{source:".focusableGrid[data-v-106e7718]{width:100%;height:100%}.grid[data-v-106e7718]{display:flex;flex-wrap:wrap;position:relative;transition:top .15s ease}.child[data-v-106e7718]{display:flex;transition:opacity .15s ease;opacity:0}.show[data-v-106e7718]{opacity:1;visibility:visible}.hide[data-v-106e7718]{opacity:0}.vertical[data-v-106e7718]{flex-direction:column}",map:void 0,media:void 0})}),h,"data-v-106e7718",!1,void 0,!1,p,void 0,void 0),y=f({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"focusableList"},[e.title?n("h3",[e._v(e._s(e.title))]):e._e(),e._v(" "),n("div",{ref:"list",staticClass:"list",class:[{focused:e.nested},{vertical:"VERTICAL"===e.orientation}],style:e.style},e._l(e.items,(function(t,i){return n("div",{key:i,ref:"childItem",refInFor:!0,staticClass:"child",class:[{show:e.showItem(i)},{focus:e.isFocused&&i===e.focusedIndex},{focused:i===e.focusedIndex}]},[n(e.child,e._b({tag:"component",class:{disabled:e.disabledIndex.includes(i)},attrs:{id:"child"+(t.id||i),isFocused:e.isFocused&&i===e.focusedIndex,disabled:t.disabled||e.disabledIndex.includes(i)}},"component",t,!1))],1)})),0)])},staticRenderFns:[]},(function(e){e&&e("data-v-0b0d491a_0",{source:".focusableList[data-v-0b0d491a]{height:100%;width:100%}h3[data-v-0b0d491a]{color:#fff;text-align:left;margin:32px 0 16px;font-size:1.6vmax}.list[data-v-0b0d491a]{display:flex;transition:all .15s ease;position:relative}.child[data-v-0b0d491a]{display:flex;opacity:0;visibility:hidden;transition:opacity .15s ease}.show[data-v-0b0d491a]{opacity:1;visibility:visible}.vertical[data-v-0b0d491a]{flex-direction:column}.disabled[data-v-0b0d491a]{background:grey}",map:void 0,media:void 0})}),{name:"focusableList",props:{hideItems:{type:Boolean,default:!1},nested:{type:Boolean,default:!1},onSettled:{type:Function,required:!1},onChildChange:{type:Function,required:!1},child:{type:Object,required:!0},title:{type:String,require:!1},items:{type:Array,required:!0},isFocused:{type:Boolean,default:!1},defaultIndex:{type:Number,default:-1},disabled:{type:Boolean,default:!1},disabledIndex:{type:Array,default:function(){return[-1]}},orientation:{type:String,default:"HORIZONTAL"},shouldScroll:{type:Boolean,default:!1},displayItems:{type:Number,default:4},id:{default:Math.random().toString()}},data:function(){return{focusedIndex:-1,scrollAmount:0,ready:!1}},computed:{style:function(){return("VERTICAL"===this.orientation?"top":"left")+": ".concat(this.scrollAmount,"px;")}},methods:{showItem:function(e){return!this.hideItems||e>=this.focusedIndex&&e<+this.displayItems+this.focusedIndex},isEnabledIndex:function(e){return!this.disabledIndex.includes(e)},setInitialvalue:function(){this.defaultIndex>-1&&this.defaultIndex<this.items.length&&this.isEnabledIndex(this.defaultIndex)?this.focusedIndex=this.defaultIndex:this.focusedIndex=this.getValidNextIndex(),this.focusedIndex>=-1&&this.updateScrollValue()},getKeysByOrientation:function(e){return{REVERSE:"VERTICAL"===e?"UP":"LEFT",FORWARD:"VERTICAL"===e?"DOWN":"RIGHT"}},getScrollAmountByOrientation:function(e,t){return e?-e["VERTICAL"===t?"clientHeight":"clientWidth"]:0},handleFocusLost:function(){(this.focusedIndex>this.items.length-1||this.disabledIndex.includes(this.focusedIndex))&&(this.getValidPrevIndex()!==this.focusedIndex?(this.$emit("onFocusLost",{prevIndex:this.focusedIndex,newIndex:this.getValidPrevIndex()}),this.focusedIndex=this.getValidPrevIndex()):this.getValidNextIndex()!==this.focusedIndex?(this.$emit("onFocusLost",{prevIndex:this.focusedIndex,newIndex:this.getValidNextIndex()}),this.focusedIndex=this.getValidNextIndex()):(this.focusedIndex=-1,this.$emit("onFocusLost",{err:"No items to set focus, either disable it or provide new item to setFocus"})))},isPrevItemPresent:function(){return this.focusedIndex>0},isNextItemPresent:function(){return this.focusedIndex<this.items.length-1},getValidNextIndex:function(){for(var e=this.focusedIndex+1,t=this.focusedIndex;e<this.items.length;){if(this.isEnabledIndex(e)){t=e,this.$emit("onFocusChange",{prevIndex:this.focusedIndex,newIndex:t,item:this.items[t]}),this.onChildChangeFunction(this.focusedIndex,t,this.items[t]);break}e++}return t},getValidPrevIndex:function(){for(var e=this.focusedIndex-1,t=this.focusedIndex;e>=0;){if(this.isEnabledIndex(e)&&e<this.items.length){t=e,this.$emit("onFocusChange",{prevIndex:this.focusedIndex,newIndex:t,item:this.items[t]}),this.onChildChangeFunction(this.focusedIndex,t,this.items[t]);break}e--}return t},updateFocus:function(e){this.focusedIndex=e?this.getValidPrevIndex():this.getValidNextIndex()},onChildChangeFunction:function(e,t,n){this.ready&&this.onChildChange&&this.onChildChange({prevIndex:e,newIndex:t,item:n})},updateScrollValue:function(){this.shouldScroll&&this.$refs.childItem&&(this.scrollAmount=this.getScrollAmountByOrientation(this.$refs.childItem[0],this.orientation)*this.focusedIndex)},resetFocus:function(e){!e.force&&this.isFocused||(this.focusedIndex=0,this.scrollAmount=0)},setExternalFocus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index,n=e.id;n===this.id&&(this.isEnabledIndex(t)&&t>=0&&t<this.items.length-1?(this.focusedIndex=t,this.updateScrollValue()):console.error("focus to the given index ".concat(t," is not possible")))},onSettledFunction:function(e){this.ready&&this.onSettled&&this.onSettled(e)}},updated:function(){this.handleFocusLost()},mounted:function(){var e,t=this;this.setInitialvalue();var n=this.getKeysByOrientation(this.orientation),s=this.getKeysByOrientation(!this.orientation);l((i(e={id:"list-".concat(this.id)},s.REVERSE,(function(){"VERTICAL"!=t.orientation||t.nested||t.onSettledFunction(s.REVERSE)})),i(e,s.FORWARD,(function(){"VERTICAL"!=t.orientation||t.nested||t.onSettledFunction(s.FORWARD)})),i(e,n.REVERSE,(function(){t.isPrevItemPresent()?(t.updateFocus("reverse"),t.updateScrollValue()):t.onSettledFunction(n.REVERSE)})),i(e,n.FORWARD,(function(){t.isNextItemPresent()?(t.updateFocus(),t.updateScrollValue()):t.onSettledFunction(n.FORWARD)})),i(e,"preCondition",(function(){return t.isFocused&&!t.disabled})),e)),d.on("RESET_FOCUS",this.resetFocus),d.on("SET_FOCUS",this.setExternalFocus),this.ready=!0},destroyed:function(){c("list-".concat(this.id)),d.off("RESET_FOCUS",this.resetFocus),d.off("SET_FOCUS",this.setExternalFocus)}},"data-v-0b0d491a",!1,void 0,!1,p,void 0,void 0),g=Object.freeze({__proto__:null,FocusableList:y,FocusableGrid:v}),b=function(e){b.installed||(b.installed=!0,Object.entries(g).forEach((function(t){var n=s(t,2),i=n[0],o=n[1];console.error("componentName",i),e.component(i,o)})))},C={install:b},F=null;return"undefined"!=typeof window?F=window.Vue:"undefined"!=typeof global&&(F=global.Vue),F&&F.use(C),e.FocusableGrid=v,e.FocusableList=y,e.default=C,e}({},mitt);