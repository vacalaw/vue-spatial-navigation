var VueSpatialNavigation=function(e,t){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],n=!0,s=!1,o=void 0;try{for(var d,a=e[Symbol.iterator]();!(n=(d=a.next()).done)&&(i.push(d.value),!t||i.length!==t);n=!0);}catch(e){s=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(s)throw o}}return i}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var l=new(i(t).default),r=!1,c=[],u={37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN"},h=function(e){if(r){var t=c.findIndex((function(t){return t.id===e.id}));t>-1?c[t]=e:c.push(e)}else r=!0,c.push(e),window.addEventListener("keydown",(function(e){c.forEach((function(t){if(!t.preCondition||t.preCondition())return t[u[e.keyCode]]&&t[u[e.keyCode]]()}))}))},f=function(e){var t=c.findIndex((function(t){return t.id===e}));t>-1&&c.splice(t,1)},m={name:"FocusableGrid",props:{onSettled:{type:Function,required:!1},child:{type:Object,required:!0},items:{type:Array,required:!0},isFocused:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},shouldScroll:{type:Boolean,default:!1},maxColumn:{type:Number,default:6},id:{default:Math.random().toString()}},data:function(){return{focusedIndex:0,scrollAmount:0,activeRow:0,activeColumn:0,width:0,itemsList:this.items.slice(0,this.maxColumn*this.maxColumn+this.maxColumn)}},computed:{columns:function(){return{width:"".concat(100/this.maxColumn,"%"),height:"".concat(this.width/this.maxColumn/16*9,"px")}},style:function(){return"transform: translateY(".concat(this.scrollAmount,"px)")}},methods:{showItem:function(e){return e>=this.activeRow*this.maxColumn&&e<=this.focusedIndex+this.maxColumn*this.maxColumn-this.activeColumn+this.maxColumn-1},getScrollAmount:function(e,t){if(e){var i=e.clientHeight;return t?-i:i}return 0},isPrevColumnPresent:function(){return this.focusedIndex>0&&this.activeColumn>0},isNextColumnPresent:function(){return this.focusedIndex<this.items.length-1&&this.activeColumn<this.maxColumn-1},isPrevRowPresent:function(){return this.focusedIndex>0&&this.activeRow>0},isNextRowPresent:function(){return this.focusedIndex<this.items.length-1&&this.activeRow<this.items.length/this.maxColumn-1},updateColumn:function(e){var t=e?-1:1;this.focusedIndex+=t,this.activeColumn+=t},updateRow:function(e){var t=e?-this.maxColumn:this.maxColumn,i=e?-1:1;this.focusedIndex+=t,this.activeRow+=i,this.isFocusIndexOutOfBound()&&(this.focusedIndex=this.items.length-1,this.activeColumn=(this.items.length-1)%this.maxColumn)},isFocusIndexOutOfBound:function(){return this.focusedIndex>this.items.length-1},updateScrollValue:function(e){this.scrollAmount+=this.getScrollAmount(this.$refs.childItem[this.focusedIndex],e)},handleFocusLost:function(){this.focusedIndex>this.items.length-1&&(this.focusedIndex=this.items.length-1)},resetFocus:function(e){!e.force&&this.isFocused||(this.focusedIndex=0,this.activeColumn=0,this.activeRow=0,this.scrollAmount=0)},onSettledFunction:function(e){this.onSettled&&this.onSettled(e)},onMainScrollWeel:function(e){e.preventDefault(),this.isKeyPress||(e.deltaY<0||e.deltaY>0)&&(e.deltaY>0&&this.isNextRowPresent()?(this.updateRow(),this.appendItem(),this.updateScrollValue("negative")):e.deltaY<0&&this.isPrevRowPresent()&&(this.updateRow("reverse"),this.updateScrollValue()))},appendItem:function(){var e,t=this.items.length-this.itemsList.length,i=t>this.maxColumn?this.maxColumn:t,n=this.items.slice(this.items[this.itemsList.length],i);this.itemsList.length<this.items.length&&(e=this.itemsList).push.apply(e,o(n))}},updated:function(){this.handleFocusLost()},mounted:function(){var e=this;this.width=this.$el.clientWidth,this.$el.addEventListener("wheel",this.onMainScrollWeel),h({LEFT:function(){e.isPrevColumnPresent()?e.updateColumn("reverse"):e.onSettledFunction("LEFT")},RIGHT:function(){e.isNextColumnPresent()?e.updateColumn():e.onSettledFunction("RIGHT")},UP:function(){e.isPrevRowPresent()?(e.updateRow("reverse"),e.shouldScroll&&e.updateScrollValue()):e.onSettledFunction("UP")},DOWN:function(){e.isNextRowPresent()?(e.updateRow(),e.shouldScroll&&e.updateScrollValue("negative"),e.appendItem()):e.onSettledFunction("DOWN")},preCondition:function(){return e.isFocused&&!e.disabled},id:"grid-".concat(this.id)}),l.on("RESET_FOCUS",this.resetFocus)},destroyed:function(){this.$el.removeEventListener("wheel",this.onMainScrollWeel),f("grid-".concat(this.id)),l.off("RESET_FOCUS",this.resetFocus)}};function p(e,t,i,n,s,o,d,a,l,r){"boolean"!=typeof d&&(l=a,a=d,d=!1);const c="function"==typeof i?i.options:i;let u;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,s&&(c.functional=!0)),n&&(c._scopeId=n),o?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=u):t&&(u=d?function(e){t.call(this,r(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),u)if(c.functional){const e=c.render;c.render=function(t,i){return u.call(i),e(t,i)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,u):[u]}return i}const v="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function x(e){return(e,t)=>function(e,t){const i=v?t.media||"default":e,n=y[i]||(y[i]={ids:new Set,styles:[]});if(!n.ids.has(e)){n.ids.add(e);let i=t.source;if(t.map&&(i+="\n/*# sourceURL="+t.map.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",t.media&&n.element.setAttribute("media",t.media),void 0===I&&(I=document.head||document.getElementsByTagName("head")[0]),I.appendChild(n.element)),"styleSheet"in n.element)n.styles.push(i),n.element.styleSheet.cssText=n.styles.filter(Boolean).join("\n");else{const e=n.ids.size-1,t=document.createTextNode(i),s=n.element.childNodes;s[e]&&n.element.removeChild(s[e]),s.length?n.element.insertBefore(t,s[e]):n.element.appendChild(t)}}}(e,t)}let I;const y={};var g=p({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"focusableGrid"},[i("div",{ref:"grid",staticClass:"grid",class:{focus:e.isFocused},style:e.style},e._l(e.itemsList,(function(t,n){return i("div",{key:t.id,ref:"childItem",refInFor:!0,staticClass:"child",class:{activeRow:e.showItem(n)},style:e.columns},[i(e.child,e._b({tag:"component",attrs:{id:"child"+(t.id||n),isFocused:e.isFocused&&n===e.focusedIndex}},"component",t,!1))],1)})),0)])},staticRenderFns:[]},(function(e){e&&e("data-v-3836b4ff_0",{source:".focusableGrid[data-v-3836b4ff]{width:100%;height:100%}.grid[data-v-3836b4ff]{display:flex;height:100%;flex-wrap:wrap;align-content:flex-start;position:relative;transition:transform .1s ease}.child[data-v-3836b4ff]{display:flex;align-items:stretch;opacity:0;visibility:hidden;transition:opacity .2s ease}h3[data-v-3836b4ff]{color:#fff;font-size:20px}.child.activeRow[data-v-3836b4ff]{opacity:1;visibility:visible}.list-enter-active[data-v-3836b4ff],.list-leave-active[data-v-3836b4ff]{transition:all .15s ease}.list-enter[data-v-3836b4ff],.list-leave-to[data-v-3836b4ff]{height:0!important;z-index:10;border-color:transparent}.list-leave-to .focus[data-v-3836b4ff]{border-color:transparent}",map:void 0,media:void 0})}),m,"data-v-3836b4ff",!1,void 0,!1,x,void 0,void 0),b=p({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"focusableList",class:[{ready:e.ready},{"nested-hide-items":e.hideItems&&e.nested},{"hide-items":e.hideItems&&!e.nested}]},[e.title?i("h3",[e._v(e._s(e.title))]):e._e(),e._v(" "),i("div",{ref:"list",staticClass:"list",class:[{vertical:"VERTICAL"===e.orientation}],style:e.style},e._l(e.itemsList,(function(t,n){return i("div",{key:"child-"+(t.id||n),ref:"childItem",refInFor:!0,staticClass:"child",class:[{focus:n===e.focusedIndex}]},[i(e.child,e._b({key:"nested-"+(t.id||n),tag:"component",class:{disabled:e.disabledIndex.includes(n)},attrs:{id:"nested-"+t.id,isFocused:e.isFocused&&n===e.focusedIndex,disabled:t.disabled||e.disabledIndex.includes(n)}},"component",t,!1))],1)})),0)])},staticRenderFns:[]},(function(e){e&&e("data-v-59d0e1c4_0",{source:".focusableList[data-v-59d0e1c4]{height:100%;width:100%}h3[data-v-59d0e1c4]{color:#fff;text-align:left;margin:32px 0 16px;font-size:1.6vmax}.list[data-v-59d0e1c4]{display:flex;position:relative}.child[data-v-59d0e1c4]{display:flex}.hide-items .child[data-v-59d0e1c4],.nested-hide-items .child[data-v-59d0e1c4]{opacity:0;visibility:hidden;transition:opacity .2s ease}.child.focus[data-v-59d0e1c4],.child.focus+.child[data-v-59d0e1c4],.child.focus+.child+.child[data-v-59d0e1c4],.nested-hide-items .child.focus+.child+.child[data-v-59d0e1c4],.nested-hide-items .child.focus+.child+.child+.child[data-v-59d0e1c4],.nested-hide-items .child.focus+.child+.child+.child+.child[data-v-59d0e1c4]{opacity:1;visibility:visible}.vertical[data-v-59d0e1c4]{flex-direction:column}.disabled[data-v-59d0e1c4]{background:grey}.ready>.list[data-v-59d0e1c4]{transition:transform .1s ease}",map:void 0,media:void 0})}),{name:"focusableList",props:{hideItems:{type:Boolean,default:!1},nested:{type:Boolean,default:!1},onSettled:{type:Function,required:!1},onChildChange:{type:Function,required:!1},child:{type:Object,required:!0},title:{type:String,require:!1},items:{type:Array,required:!0},isFocused:{type:Boolean,default:!1},defaultIndex:{type:Number,default:-1},disabled:{type:Boolean,default:!1},disabledIndex:{type:Array,default:function(){return[-1]}},orientation:{type:String,default:"HORIZONTAL"},shouldScroll:{type:Boolean,default:!1},displayItems:{type:Number,default:4},id:{default:Math.random().toString()}},data:function(){return{focusedIndex:-1,scrollAmount:0,ready:!1,itemsList:this.hideItems?this.items.slice(0,this.displayItems):this.items}},computed:{style:function(){return("VERTICAL"===this.orientation?"transform: translateY":"transform: translateX")+"(".concat(this.scrollAmount,"px);")}},methods:{showItem:function(e,t){return!this.hideItems||t>=this.focusedIndex&&t<+this.displayItems+this.focusedIndex},isEnabledIndex:function(e){return!this.disabledIndex.includes(e)},setInitialvalue:function(){this.defaultIndex>-1&&this.defaultIndex<this.items.length&&this.isEnabledIndex(this.defaultIndex)?this.focusedIndex=this.defaultIndex:this.focusedIndex=this.getValidNextIndex(),this.focusedIndex>=-1&&this.updateScrollValue()},getKeysByOrientation:function(e){return{REVERSE:"VERTICAL"===e?"UP":"LEFT",FORWARD:"VERTICAL"===e?"DOWN":"RIGHT"}},getScrollAmountByOrientation:function(e,t){return e?-e["VERTICAL"===t?"clientHeight":"clientWidth"]:0},handleFocusLost:function(){(this.focusedIndex>this.items.length-1||this.disabledIndex.includes(this.focusedIndex))&&(this.getValidPrevIndex()!==this.focusedIndex?(this.$emit("onFocusLost",{prevIndex:this.focusedIndex,newIndex:this.getValidPrevIndex()}),this.focusedIndex=this.getValidPrevIndex()):this.getValidNextIndex()!==this.focusedIndex?(this.$emit("onFocusLost",{prevIndex:this.focusedIndex,newIndex:this.getValidNextIndex()}),this.focusedIndex=this.getValidNextIndex()):(this.focusedIndex=-1,this.$emit("onFocusLost",{err:"No items to set focus, either disable it or provide new item to setFocus"})))},isPrevItemPresent:function(){return this.focusedIndex>0},isNextItemPresent:function(){return this.focusedIndex<this.items.length-1},getValidNextIndex:function(){for(var e=this.focusedIndex+1,t=this.focusedIndex;e<this.items.length;){if(this.isEnabledIndex(e)){t=e,this.$emit("onFocusChange",{prevIndex:this.focusedIndex,newIndex:t,item:this.items[t]}),this.onChildChangeFunction(this.focusedIndex,t,this.items[t]);break}e++}return t},getValidPrevIndex:function(){for(var e=this.focusedIndex-1,t=this.focusedIndex;e>=0;){if(this.isEnabledIndex(e)&&e<this.items.length){t=e,this.$emit("onFocusChange",{prevIndex:this.focusedIndex,newIndex:t,item:this.items[t]}),this.onChildChangeFunction(this.focusedIndex,t,this.items[t]);break}e--}return t},updateFocus:function(e){this.focusedIndex=e?this.getValidPrevIndex():this.getValidNextIndex()},onChildChangeFunction:function(e,t,i){this.ready&&this.onChildChange&&this.onChildChange({prevIndex:e,newIndex:t,item:i})},updateScrollValue:function(){this.shouldScroll&&this.$refs.childItem&&(this.scrollAmount=this.getScrollAmountByOrientation(this.$refs.childItem[0],this.orientation)*this.focusedIndex)},resetFocus:function(e){!e.force&&this.isFocused||(this.focusedIndex=0,this.scrollAmount=0)},setExternalFocus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index,i=e.id;i===this.id&&(this.isEnabledIndex(t)&&t>=0&&t<this.items.length-1?(this.focusedIndex=t,this.updateScrollValue()):console.error("focus to the given index ".concat(t," is not possible")))},onSettledFunction:function(e){this.ready&&this.onSettled&&this.onSettled(e)},appendItem:function(){this.focusedIndex>=this.itemsList.length-this.displayItems&&this.itemsList.length<this.items.length&&this.itemsList.push(this.items[this.itemsList.length])}},updated:function(){this.handleFocusLost()},mounted:function(){var e,t=this;this.setInitialvalue();var i=this.getKeysByOrientation(this.orientation),s=this.getKeysByOrientation(!this.orientation);h((n(e={id:"list-".concat(this.id)},s.REVERSE,(function(){"VERTICAL"!=t.orientation||t.hideItems||t.onSettledFunction(s.REVERSE)})),n(e,s.FORWARD,(function(){"VERTICAL"!=t.orientation||t.hideItems||t.onSettledFunction(s.FORWARD)})),n(e,i.REVERSE,(function(){t.isPrevItemPresent()?(t.updateFocus("reverse"),t.updateScrollValue()):t.onSettledFunction(i.REVERSE)})),n(e,i.FORWARD,(function(){t.isNextItemPresent()?(t.updateFocus(),t.updateScrollValue(),t.appendItem()):t.onSettledFunction(i.FORWARD)})),n(e,"preCondition",(function(){return t.isFocused&&!t.disabled})),e)),l.on("RESET_FOCUS",this.resetFocus),l.on("SET_FOCUS",this.setExternalFocus),setTimeout((function(){t.ready=!0}),500)},destroyed:function(){f("list-".concat(this.id)),l.off("RESET_FOCUS",this.resetFocus),l.off("SET_FOCUS",this.setExternalFocus)}},"data-v-59d0e1c4",!1,void 0,!1,x,void 0,void 0),C=Object.freeze({__proto__:null,FocusableList:b,FocusableGrid:g}),F=function(e){F.installed||(F.installed=!0,Object.entries(C).forEach((function(t){var i=s(t,2),n=i[0],o=i[1];console.error("componentName",n),e.component(n,o)})))},S={install:F},R=null;return"undefined"!=typeof window?R=window.Vue:"undefined"!=typeof global&&(R=global.Vue),R&&R.use(S),e.FocusableGrid=g,e.FocusableList=b,e.default=S,e}({},mitt);